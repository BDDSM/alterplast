
//_____________________________________________________________________________
Функция Сам(Конт) Возврат Конт; КонецФункции //:Контекст

Процедура ОпределениеИдентификатораПоля_Падение(Идентификатор) Экспорт
	МД = СоздатьОбъект("MetaDataWork");
	НомерПоля = МД.ИДОбъекта(Метаданные.Справочник("НетТакогоСправочника")); //здесь происходило падение
КонецПроцедуры

Процедура тестОпределениеИдентификатораПоля_Падение() Экспорт
	Сам = Сам(Контекст);
	Сам.ПроверитьИсключение(Сам, "ОпределениеИдентификатораПоля_Падение", "НетТакогоСправочника");
КонецПроцедуры
                    
Процедура Тест_Метаданные() Экспорт
	МДВ = СоздатьОбъект("MetaDataWork");
	МД = МДВ.Метаданные;
	
	Сам(Контекст).ПроверитьРавенство(ТипЗначенияСтр(МД), "Метаданные");
	Сам(Контекст).ПроверитьБольше(МД.Документ(), 0);
КонецПроцедуры	// Тест_Метаданные
                    
Процедура Тест_ПрисоединитьМД() Экспорт
	МДВ = СоздатьОбъект("MetaDataWork");
	МДВ.ПрисоединитьМД(КаталогИБ()+"1cv7.md");
КонецПроцедуры	// Тест_Метаданные
                    
Процедура Тест_ПрисоединитьМД_и_Метаданные() Экспорт
	МДВ = СоздатьОбъект("MetaDataWork");
	МДВ.ПрисоединитьМД(КаталогИБ()+"1cv7.md");
	
	МД = МДВ.Метаданные;
	
	Сам(Контекст).ПроверитьРавенство(ТипЗначенияСтр(МД), "Метаданные");
	Сам(Контекст).ПроверитьБольше(МД.Документ(), 0);
КонецПроцедуры	// Тест_Метаданные
                    
Процедура Тест_ПрисоединитьМД_и_Метаданные_ВремяЖизни() Экспорт
	МДВ = СоздатьОбъект("MetaDataWork");
	МДВ.ПрисоединитьМД(КаталогИБ()+"1cv7.md");
	
	МД = МДВ.Метаданные;
	МДВ="";            //
		
	Сам(Контекст).ПроверитьРавенство(ТипЗначенияСтр(МД), "");
КонецПроцедуры	// Тест_Метаданные

//// trad
//Процедура Тест(МД)
//	Сообщить(МД);
//	Для Тек=1 По МД.Документ() Цикл
//		Сообщить("  "+МД.Документ(Тек).Идентификатор);
//	КонецЦикла;
//КонецПроцедуры
//
//Процедура Сформировать()
//	МДВ=СоздатьОбъект("MetaDataWork");
//	Тест(МДВ.Метаданные);
//
//	МДВ.ПрисоединитьМД("c:\bases\work3\1cv7.md");
//	Тест(МДВ.Метаданные);
//	
//	//МД=МДВ.Метаданные; //тест рассогласованности времени жизни
//	//МДВ="";            //
//	//Тест(МД);
//
////
//КонецПроцедуры